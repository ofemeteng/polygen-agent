"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chat";
exports.ids = ["pages/api/chat"];
exports.modules = {

/***/ "@coinbase/agentkit":
/*!*************************************!*\
  !*** external "@coinbase/agentkit" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@coinbase/agentkit");

/***/ }),

/***/ "@coinbase/agentkit-langchain":
/*!***********************************************!*\
  !*** external "@coinbase/agentkit-langchain" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("@coinbase/agentkit-langchain");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "readline":
/*!***************************!*\
  !*** external "readline" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("readline");

/***/ }),

/***/ "@langchain/core/messages":
/*!*******************************************!*\
  !*** external "@langchain/core/messages" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = import("@langchain/core/messages");;

/***/ }),

/***/ "@langchain/langgraph":
/*!***************************************!*\
  !*** external "@langchain/langgraph" ***!
  \***************************************/
/***/ ((module) => {

module.exports = import("@langchain/langgraph");;

/***/ }),

/***/ "@langchain/langgraph/prebuilt":
/*!************************************************!*\
  !*** external "@langchain/langgraph/prebuilt" ***!
  \************************************************/
/***/ ((module) => {

module.exports = import("@langchain/langgraph/prebuilt");;

/***/ }),

/***/ "@langchain/openai":
/*!************************************!*\
  !*** external "@langchain/openai" ***!
  \************************************/
/***/ ((module) => {

module.exports = import("@langchain/openai");;

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "thirdweb":
/*!***************************!*\
  !*** external "thirdweb" ***!
  \***************************/
/***/ ((module) => {

module.exports = import("thirdweb");;

/***/ }),

/***/ "thirdweb/chains":
/*!**********************************!*\
  !*** external "thirdweb/chains" ***!
  \**********************************/
/***/ ((module) => {

module.exports = import("thirdweb/chains");;

/***/ }),

/***/ "thirdweb/storage":
/*!***********************************!*\
  !*** external "thirdweb/storage" ***!
  \***********************************/
/***/ ((module) => {

module.exports = import("thirdweb/storage");;

/***/ }),

/***/ "thirdweb/wallets":
/*!***********************************!*\
  !*** external "thirdweb/wallets" ***!
  \***********************************/
/***/ ((module) => {

module.exports = import("thirdweb/wallets");;

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/chat.ts */ \"(api)/./pages/api/chat.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chat\",\n        pathname: \"/api/chat\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNoYXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmNoYXQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDZ0Q7QUFDaEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLCtDQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywrQ0FBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9jaGF0LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./actions/generate3DAsset.ts":
/*!************************************!*\
  !*** ./actions/generate3DAsset.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generate3DAsset: () => (/* binding */ generate3DAsset)\n/* harmony export */ });\n/* harmony import */ var _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @coinbase/agentkit */ \"@coinbase/agentkit\");\n/* harmony import */ var _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_1__, axios__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_1__, axios__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n// Define the schema for the text-to-3d action\nconst TextTo3DSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    prompt: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().describe(\"Text description of the 3D model to generate\"),\n    artStyle: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional().describe(\"Optional art style for the 3D model (e.g., 'realistic', 'cartoon')\"),\n    negativePrompt: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional().describe(\"Optional negative prompt to exclude certain characteristics\")\n});\n// Create the Meshy text-to-3d action provider\nconst generate3DAsset = (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.customActionProvider)({\n    name: \"generate_3d_model\",\n    description: \"Generate a 3D model from a text prompt using Meshy.ai\",\n    schema: TextTo3DSchema,\n    invoke: async (_, args)=>{\n        // Ensure API key is set\n        const apiKey = process.env.MESHY_API_KEY;\n        if (!apiKey) {\n            return \"Error: MESHY_API_KEY environment variable is not set\";\n        }\n        try {\n            // 1. Create preview task\n            const generatePreviewRequest = {\n                mode: \"preview\",\n                prompt: args.prompt,\n                negative_prompt: args.negativePrompt || \"low quality, low resolution, low poly, ugly\",\n                art_style: args.artStyle || \"realistic\",\n                should_remesh: true\n            };\n            const generatePreviewResponse = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(\"https://api.meshy.ai/openapi/v2/text-to-3d\", generatePreviewRequest, {\n                headers: {\n                    \"Authorization\": `Bearer ${apiKey}`,\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            const previewTaskId = generatePreviewResponse.data.result;\n            // 2. Poll for task completion\n            let previewTask;\n            const maxAttempts = 60; // 5 minutes max (5s * 60)\n            for(let i = 0; i < maxAttempts; i++){\n                const previewTaskResponse = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(`https://api.meshy.ai/openapi/v2/text-to-3d/${previewTaskId}`, {\n                    headers: {\n                        \"Authorization\": `Bearer ${apiKey}`\n                    }\n                });\n                previewTask = previewTaskResponse.data;\n                if (previewTask.status === \"SUCCEEDED\") {\n                    break;\n                }\n                if (previewTask.status === \"FAILED\") {\n                    return `3D model generation failed: ${previewTask.error_message || \"Unknown error\"}`;\n                }\n                // Wait 5 seconds before next poll\n                await new Promise((resolve)=>setTimeout(resolve, 5000));\n            }\n            // Check if task timed out\n            if (previewTask.status !== \"SUCCEEDED\") {\n                return \"3D model generation timed out. Please try again.\";\n            }\n            // 3. Return model information\n            return JSON.stringify({\n                taskId: previewTaskId,\n                modelUrls: previewTask.model_urls,\n                status: previewTask.status\n            }, null, 2);\n        } catch (error) {\n            console.error(\"Error in Meshy 3D model generation:\", error);\n            if (axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isAxiosError(error)) {\n                return `API Error: ${error.response?.data?.message || error.message}`;\n            }\n            return \"An unexpected error occurred during 3D model generation\";\n        }\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hY3Rpb25zL2dlbmVyYXRlM0RBc3NldC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUc0QjtBQUNKO0FBQ0U7QUFFMUIsOENBQThDO0FBQzlDLE1BQU1HLGlCQUFpQkYsa0NBQUNBLENBQUNHLE1BQU0sQ0FBQztJQUM5QkMsUUFBUUosa0NBQUNBLENBQUNLLE1BQU0sR0FBR0MsUUFBUSxDQUFDO0lBQzVCQyxVQUFVUCxrQ0FBQ0EsQ0FBQ0ssTUFBTSxHQUFHRyxRQUFRLEdBQUdGLFFBQVEsQ0FBQztJQUN6Q0csZ0JBQWdCVCxrQ0FBQ0EsQ0FBQ0ssTUFBTSxHQUFHRyxRQUFRLEdBQUdGLFFBQVEsQ0FBQztBQUNqRDtBQUVBLDhDQUE4QztBQUN2QyxNQUFNSSxrQkFBa0JYLHdFQUFvQkEsQ0FBaUI7SUFDbEVZLE1BQU07SUFDTkMsYUFBYTtJQUNiQyxRQUFRWDtJQUVSWSxRQUFRLE9BQU9DLEdBQUdDO1FBQ2hCLHdCQUF3QjtRQUN4QixNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGFBQWE7UUFDeEMsSUFBSSxDQUFDSCxRQUFRO1lBQ1gsT0FBTztRQUNUO1FBRUEsSUFBSTtZQUNGLHlCQUF5QjtZQUN6QixNQUFNSSx5QkFBeUI7Z0JBQzdCQyxNQUFNO2dCQUNObEIsUUFBUVksS0FBS1osTUFBTTtnQkFDbkJtQixpQkFBaUJQLEtBQUtQLGNBQWMsSUFBSTtnQkFDeENlLFdBQVdSLEtBQUtULFFBQVEsSUFBSTtnQkFDNUJrQixlQUFlO1lBQ2pCO1lBRUEsTUFBTUMsMEJBQTBCLE1BQU16QixrREFBVSxDQUM5Qyw4Q0FDQW9CLHdCQUNBO2dCQUNFTyxTQUFTO29CQUNQLGlCQUFpQixDQUFDLE9BQU8sRUFBRVgsUUFBUTtvQkFDbkMsZ0JBQWdCO2dCQUNsQjtZQUNGO1lBR0YsTUFBTVksZ0JBQWdCSCx3QkFBd0JJLElBQUksQ0FBQ0MsTUFBTTtZQUV6RCw4QkFBOEI7WUFDOUIsSUFBSUM7WUFDSixNQUFNQyxjQUFjLElBQUksMEJBQTBCO1lBQ2xELElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRCxhQUFhQyxJQUFLO2dCQUNwQyxNQUFNQyxzQkFBc0IsTUFBTWxDLGlEQUFTLENBQ3pDLENBQUMsMkNBQTJDLEVBQUU0QixlQUFlLEVBQzdEO29CQUNFRCxTQUFTO3dCQUNQLGlCQUFpQixDQUFDLE9BQU8sRUFBRVgsUUFBUTtvQkFDckM7Z0JBQ0Y7Z0JBR0ZlLGNBQWNHLG9CQUFvQkwsSUFBSTtnQkFFdEMsSUFBSUUsWUFBWUssTUFBTSxLQUFLLGFBQWE7b0JBQ3RDO2dCQUNGO2dCQUVBLElBQUlMLFlBQVlLLE1BQU0sS0FBSyxVQUFVO29CQUNuQyxPQUFPLENBQUMsNEJBQTRCLEVBQUVMLFlBQVlNLGFBQWEsSUFBSSxpQkFBaUI7Z0JBQ3RGO2dCQUVBLGtDQUFrQztnQkFDbEMsTUFBTSxJQUFJQyxRQUFRQyxDQUFBQSxVQUFXQyxXQUFXRCxTQUFTO1lBQ25EO1lBRUEsMEJBQTBCO1lBQzFCLElBQUlSLFlBQVlLLE1BQU0sS0FBSyxhQUFhO2dCQUN0QyxPQUFPO1lBQ1Q7WUFFQSw4QkFBOEI7WUFDOUIsT0FBT0ssS0FBS0MsU0FBUyxDQUFDO2dCQUNwQkMsUUFBUWY7Z0JBQ1JnQixXQUFXYixZQUFZYyxVQUFVO2dCQUNqQ1QsUUFBUUwsWUFBWUssTUFBTTtZQUM1QixHQUFHLE1BQU07UUFFWCxFQUFFLE9BQU9VLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVDQUF1Q0E7WUFFckQsSUFBSTlDLDBEQUFrQixDQUFDOEMsUUFBUTtnQkFDN0IsT0FBTyxDQUFDLFdBQVcsRUFBRUEsTUFBTUcsUUFBUSxFQUFFcEIsTUFBTXFCLFdBQVdKLE1BQU1JLE9BQU8sRUFBRTtZQUN2RTtZQUVBLE9BQU87UUFDVDtJQUNGO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9hY3Rpb25zL2dlbmVyYXRlM0RBc3NldC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBcbiAgY3VzdG9tQWN0aW9uUHJvdmlkZXIsIFxuICBXYWxsZXRQcm92aWRlciBcbn0gZnJvbSBcIkBjb2luYmFzZS9hZ2VudGtpdFwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcblxuLy8gRGVmaW5lIHRoZSBzY2hlbWEgZm9yIHRoZSB0ZXh0LXRvLTNkIGFjdGlvblxuY29uc3QgVGV4dFRvM0RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHByb21wdDogei5zdHJpbmcoKS5kZXNjcmliZShcIlRleHQgZGVzY3JpcHRpb24gb2YgdGhlIDNEIG1vZGVsIHRvIGdlbmVyYXRlXCIpLFxuICBhcnRTdHlsZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLmRlc2NyaWJlKFwiT3B0aW9uYWwgYXJ0IHN0eWxlIGZvciB0aGUgM0QgbW9kZWwgKGUuZy4sICdyZWFsaXN0aWMnLCAnY2FydG9vbicpXCIpLFxuICBuZWdhdGl2ZVByb21wdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLmRlc2NyaWJlKFwiT3B0aW9uYWwgbmVnYXRpdmUgcHJvbXB0IHRvIGV4Y2x1ZGUgY2VydGFpbiBjaGFyYWN0ZXJpc3RpY3NcIiksXG59KTtcblxuLy8gQ3JlYXRlIHRoZSBNZXNoeSB0ZXh0LXRvLTNkIGFjdGlvbiBwcm92aWRlclxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlM0RBc3NldCA9IGN1c3RvbUFjdGlvblByb3ZpZGVyPFdhbGxldFByb3ZpZGVyPih7XG4gIG5hbWU6IFwiZ2VuZXJhdGVfM2RfbW9kZWxcIixcbiAgZGVzY3JpcHRpb246IFwiR2VuZXJhdGUgYSAzRCBtb2RlbCBmcm9tIGEgdGV4dCBwcm9tcHQgdXNpbmcgTWVzaHkuYWlcIixcbiAgc2NoZW1hOiBUZXh0VG8zRFNjaGVtYSxcblxuICBpbnZva2U6IGFzeW5jIChfLCBhcmdzOiB6LmluZmVyPHR5cGVvZiBUZXh0VG8zRFNjaGVtYT4pID0+IHtcbiAgICAvLyBFbnN1cmUgQVBJIGtleSBpcyBzZXRcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5NRVNIWV9BUElfS0VZO1xuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICByZXR1cm4gXCJFcnJvcjogTUVTSFlfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBub3Qgc2V0XCI7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuIENyZWF0ZSBwcmV2aWV3IHRhc2tcbiAgICAgIGNvbnN0IGdlbmVyYXRlUHJldmlld1JlcXVlc3QgPSB7XG4gICAgICAgIG1vZGU6IFwicHJldmlld1wiLFxuICAgICAgICBwcm9tcHQ6IGFyZ3MucHJvbXB0LFxuICAgICAgICBuZWdhdGl2ZV9wcm9tcHQ6IGFyZ3MubmVnYXRpdmVQcm9tcHQgfHwgXCJsb3cgcXVhbGl0eSwgbG93IHJlc29sdXRpb24sIGxvdyBwb2x5LCB1Z2x5XCIsXG4gICAgICAgIGFydF9zdHlsZTogYXJncy5hcnRTdHlsZSB8fCBcInJlYWxpc3RpY1wiLFxuICAgICAgICBzaG91bGRfcmVtZXNoOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZ2VuZXJhdGVQcmV2aWV3UmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICBcImh0dHBzOi8vYXBpLm1lc2h5LmFpL29wZW5hcGkvdjIvdGV4dC10by0zZFwiLFxuICAgICAgICBnZW5lcmF0ZVByZXZpZXdSZXF1ZXN0LFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IGBCZWFyZXIgJHthcGlLZXl9YCxcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBjb25zdCBwcmV2aWV3VGFza0lkID0gZ2VuZXJhdGVQcmV2aWV3UmVzcG9uc2UuZGF0YS5yZXN1bHQ7XG5cbiAgICAgIC8vIDIuIFBvbGwgZm9yIHRhc2sgY29tcGxldGlvblxuICAgICAgbGV0IHByZXZpZXdUYXNrO1xuICAgICAgY29uc3QgbWF4QXR0ZW1wdHMgPSA2MDsgLy8gNSBtaW51dGVzIG1heCAoNXMgKiA2MClcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4QXR0ZW1wdHM7IGkrKykge1xuICAgICAgICBjb25zdCBwcmV2aWV3VGFza1Jlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFxuICAgICAgICAgIGBodHRwczovL2FwaS5tZXNoeS5haS9vcGVuYXBpL3YyL3RleHQtdG8tM2QvJHtwcmV2aWV3VGFza0lkfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke2FwaUtleX1gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHByZXZpZXdUYXNrID0gcHJldmlld1Rhc2tSZXNwb25zZS5kYXRhO1xuXG4gICAgICAgIGlmIChwcmV2aWV3VGFzay5zdGF0dXMgPT09IFwiU1VDQ0VFREVEXCIpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcmV2aWV3VGFzay5zdGF0dXMgPT09IFwiRkFJTEVEXCIpIHtcbiAgICAgICAgICByZXR1cm4gYDNEIG1vZGVsIGdlbmVyYXRpb24gZmFpbGVkOiAke3ByZXZpZXdUYXNrLmVycm9yX21lc3NhZ2UgfHwgXCJVbmtub3duIGVycm9yXCJ9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdhaXQgNSBzZWNvbmRzIGJlZm9yZSBuZXh0IHBvbGxcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMDApKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdGFzayB0aW1lZCBvdXRcbiAgICAgIGlmIChwcmV2aWV3VGFzay5zdGF0dXMgIT09IFwiU1VDQ0VFREVEXCIpIHtcbiAgICAgICAgcmV0dXJuIFwiM0QgbW9kZWwgZ2VuZXJhdGlvbiB0aW1lZCBvdXQuIFBsZWFzZSB0cnkgYWdhaW4uXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIDMuIFJldHVybiBtb2RlbCBpbmZvcm1hdGlvblxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdGFza0lkOiBwcmV2aWV3VGFza0lkLFxuICAgICAgICBtb2RlbFVybHM6IHByZXZpZXdUYXNrLm1vZGVsX3VybHMsXG4gICAgICAgIHN0YXR1czogcHJldmlld1Rhc2suc3RhdHVzXG4gICAgICB9LCBudWxsLCAyKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gTWVzaHkgM0QgbW9kZWwgZ2VuZXJhdGlvbjpcIiwgZXJyb3IpO1xuXG4gICAgICBpZiAoYXhpb3MuaXNBeGlvc0Vycm9yKGVycm9yKSkge1xuICAgICAgICByZXR1cm4gYEFQSSBFcnJvcjogJHtlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlfWA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQgZHVyaW5nIDNEIG1vZGVsIGdlbmVyYXRpb25cIjtcbiAgICB9XG4gIH1cbn0pOyJdLCJuYW1lcyI6WyJjdXN0b21BY3Rpb25Qcm92aWRlciIsInoiLCJheGlvcyIsIlRleHRUbzNEU2NoZW1hIiwib2JqZWN0IiwicHJvbXB0Iiwic3RyaW5nIiwiZGVzY3JpYmUiLCJhcnRTdHlsZSIsIm9wdGlvbmFsIiwibmVnYXRpdmVQcm9tcHQiLCJnZW5lcmF0ZTNEQXNzZXQiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJzY2hlbWEiLCJpbnZva2UiLCJfIiwiYXJncyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJNRVNIWV9BUElfS0VZIiwiZ2VuZXJhdGVQcmV2aWV3UmVxdWVzdCIsIm1vZGUiLCJuZWdhdGl2ZV9wcm9tcHQiLCJhcnRfc3R5bGUiLCJzaG91bGRfcmVtZXNoIiwiZ2VuZXJhdGVQcmV2aWV3UmVzcG9uc2UiLCJwb3N0IiwiaGVhZGVycyIsInByZXZpZXdUYXNrSWQiLCJkYXRhIiwicmVzdWx0IiwicHJldmlld1Rhc2siLCJtYXhBdHRlbXB0cyIsImkiLCJwcmV2aWV3VGFza1Jlc3BvbnNlIiwiZ2V0Iiwic3RhdHVzIiwiZXJyb3JfbWVzc2FnZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0YXNrSWQiLCJtb2RlbFVybHMiLCJtb2RlbF91cmxzIiwiZXJyb3IiLCJjb25zb2xlIiwiaXNBeGlvc0Vycm9yIiwicmVzcG9uc2UiLCJtZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./actions/generate3DAsset.ts\n");

/***/ }),

/***/ "(api)/./actions/mintNFT.ts":
/*!****************************!*\
  !*** ./actions/mintNFT.ts ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mintNFT: () => (/* binding */ mintNFT)\n/* harmony export */ });\n/* harmony import */ var _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @coinbase/agentkit */ \"@coinbase/agentkit\");\n/* harmony import */ var _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var thirdweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! thirdweb */ \"thirdweb\");\n/* harmony import */ var thirdweb_wallets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! thirdweb/wallets */ \"thirdweb/wallets\");\n/* harmony import */ var thirdweb_chains__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! thirdweb/chains */ \"thirdweb/chains\");\n/* harmony import */ var thirdweb_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! thirdweb/storage */ \"thirdweb/storage\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_1__, thirdweb__WEBPACK_IMPORTED_MODULE_2__, thirdweb_wallets__WEBPACK_IMPORTED_MODULE_3__, thirdweb_chains__WEBPACK_IMPORTED_MODULE_4__, thirdweb_storage__WEBPACK_IMPORTED_MODULE_5__, axios__WEBPACK_IMPORTED_MODULE_6__]);\n([zod__WEBPACK_IMPORTED_MODULE_1__, thirdweb__WEBPACK_IMPORTED_MODULE_2__, thirdweb_wallets__WEBPACK_IMPORTED_MODULE_3__, thirdweb_chains__WEBPACK_IMPORTED_MODULE_4__, thirdweb_storage__WEBPACK_IMPORTED_MODULE_5__, axios__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n// Schema for the action parameters\nconst MintNFTSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    destinationAddress: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().regex(/^0x[a-fA-F0-9]{40}$/, \"Invalid Ethereum address\").describe(\"The Ethereum address where the NFT should be minted to\"),\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1).describe(\"The name of the NFT\"),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional().describe(\"Optional description of the NFT. If not provided, will be generated from the name\"),\n    modelUrl: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().url().describe(\"The URL of the 3D model from Meshy AI\")\n});\nconst mintNFT = (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.customActionProvider)({\n    name: \"mint_nft\",\n    description: \"Mints an NFT from the 3D model to the specified address\",\n    schema: MintNFTSchema,\n    invoke: async (_, args)=>{\n        try {\n            // Validate environment variables\n            const CONTRACT_ADDRESS = process.env.CONTRACT_ADDRESS;\n            const THIRDWEB_CLIENT_ID = process.env.THIRDWEB_CLIENT_ID;\n            const ACCOUNT_PRIVATE_KEY = process.env.ACCOUNT_PRIVATE_KEY || '';\n            if (!CONTRACT_ADDRESS || !THIRDWEB_CLIENT_ID || !ACCOUNT_PRIVATE_KEY) {\n                throw new Error(\"Missing required environment variables\");\n            }\n            // create the client with your clientId, or secretKey if in a server environment\n            const client = (0,thirdweb__WEBPACK_IMPORTED_MODULE_2__.createThirdwebClient)({\n                clientId: THIRDWEB_CLIENT_ID\n            });\n            // connect to your contract\n            const contract = (0,thirdweb__WEBPACK_IMPORTED_MODULE_2__.getContract)({\n                client,\n                chain: (0,thirdweb_chains__WEBPACK_IMPORTED_MODULE_4__.defineChain)(84532),\n                address: CONTRACT_ADDRESS\n            });\n            // Download the 3D model from Meshy AI\n            const modelResponse = await axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get(args.modelUrl, {\n                responseType: 'arraybuffer'\n            });\n            // Create File object from the model data\n            const modelFile = new File([\n                modelResponse.data\n            ], 'model.glb', {\n                type: 'model/gltf-binary'\n            });\n            // Upload the 3D model to IPFS\n            const modelUri = await (0,thirdweb_storage__WEBPACK_IMPORTED_MODULE_5__.upload)({\n                client,\n                files: [\n                    modelFile\n                ]\n            });\n            // Prepare metadata\n            const metadata = {\n                name: args.name,\n                description: args.description || `A 3D model of ${args.name.toLowerCase()} generated by Polygen agent.`,\n                animation_url: modelUri,\n                image: \"\",\n                background_color: \"\",\n                external_url: \"\",\n                customImage: \"\",\n                customAnimationUrl: \"\"\n            };\n            // Upload metadata to IPFS\n            const metadataUri = await (0,thirdweb_storage__WEBPACK_IMPORTED_MODULE_5__.upload)({\n                client,\n                files: [\n                    metadata\n                ]\n            });\n            // Mint NFT using the IPFS URI of the metadata\n            const transaction = await (0,thirdweb__WEBPACK_IMPORTED_MODULE_2__.prepareContractCall)({\n                contract,\n                method: \"function mintTo(address _to, string _uri) returns (uint256)\",\n                params: [\n                    args.destinationAddress,\n                    metadataUri\n                ]\n            });\n            const account = (0,thirdweb_wallets__WEBPACK_IMPORTED_MODULE_3__.privateKeyToAccount)({\n                client,\n                privateKey: ACCOUNT_PRIVATE_KEY\n            });\n            const { transactionHash } = await (0,thirdweb__WEBPACK_IMPORTED_MODULE_2__.sendTransaction)({\n                transaction,\n                account\n            });\n            return JSON.stringify({\n                status: \"success\",\n                transactionUri: `https://sepolia.basescan.org/tx/${transactionHash}`,\n                metadataUri,\n                metadata\n            }, null, 2);\n        } catch (error) {\n            if (error instanceof Error) {\n                return `Error minting NFT: ${error.message}`;\n            }\n            return \"An unknown error occurred while minting the NFT\";\n        }\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1JDLGdCQUFnQixDQUFDLGdDQUFnQyxFQUFFSixpQkFBaUI7Z0JBQ3BFTjtnQkFDQVI7WUFDRixHQUFHLE1BQU07UUFFWCxFQUFFLE9BQU9tQixPQUFPO1lBQ2QsSUFBSUEsaUJBQWlCbEMsT0FBTztnQkFDMUIsT0FBTyxDQUFDLG1CQUFtQixFQUFFa0MsTUFBTUMsT0FBTyxFQUFFO1lBQzlDO1lBQ0EsT0FBTztRQUNUO0lBQ0Y7QUFDRixHQUFHIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2FjdGlvbnMvbWludE5GVC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjdXN0b21BY3Rpb25Qcm92aWRlciB9IGZyb20gJ0Bjb2luYmFzZS9hZ2VudGtpdCc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7XG4gIGNyZWF0ZVRoaXJkd2ViQ2xpZW50LFxuICBnZXRDb250cmFjdCxcbiAgcHJlcGFyZUNvbnRyYWN0Q2FsbCxcbiAgc2VuZFRyYW5zYWN0aW9uLFxufSBmcm9tIFwidGhpcmR3ZWJcIjtcbmltcG9ydCB7IHByaXZhdGVLZXlUb0FjY291bnQgfSBmcm9tIFwidGhpcmR3ZWIvd2FsbGV0c1wiO1xuaW1wb3J0IHsgZGVmaW5lQ2hhaW4gfSBmcm9tIFwidGhpcmR3ZWIvY2hhaW5zXCI7XG5pbXBvcnQgeyB1cGxvYWQgfSBmcm9tIFwidGhpcmR3ZWIvc3RvcmFnZVwiO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuLy8gU2NoZW1hIGZvciB0aGUgYWN0aW9uIHBhcmFtZXRlcnNcbmNvbnN0IE1pbnRORlRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGRlc3RpbmF0aW9uQWRkcmVzczogelxuICAgIC5zdHJpbmcoKVxuICAgIC5yZWdleCgvXjB4W2EtZkEtRjAtOV17NDB9JC8sIFwiSW52YWxpZCBFdGhlcmV1bSBhZGRyZXNzXCIpXG4gICAgLmRlc2NyaWJlKFwiVGhlIEV0aGVyZXVtIGFkZHJlc3Mgd2hlcmUgdGhlIE5GVCBzaG91bGQgYmUgbWludGVkIHRvXCIpLFxuICBuYW1lOiB6XG4gICAgLnN0cmluZygpXG4gICAgLm1pbigxKVxuICAgIC5kZXNjcmliZShcIlRoZSBuYW1lIG9mIHRoZSBORlRcIiksXG4gIGRlc2NyaXB0aW9uOiB6XG4gICAgLnN0cmluZygpXG4gICAgLm9wdGlvbmFsKClcbiAgICAuZGVzY3JpYmUoXCJPcHRpb25hbCBkZXNjcmlwdGlvbiBvZiB0aGUgTkZULiBJZiBub3QgcHJvdmlkZWQsIHdpbGwgYmUgZ2VuZXJhdGVkIGZyb20gdGhlIG5hbWVcIiksXG4gIG1vZGVsVXJsOiB6XG4gICAgLnN0cmluZygpXG4gICAgLnVybCgpXG4gICAgLmRlc2NyaWJlKFwiVGhlIFVSTCBvZiB0aGUgM0QgbW9kZWwgZnJvbSBNZXNoeSBBSVwiKVxufSk7XG5cbmV4cG9ydCBjb25zdCBtaW50TkZUID0gY3VzdG9tQWN0aW9uUHJvdmlkZXIoe1xuICBuYW1lOiBcIm1pbnRfbmZ0XCIsXG4gIGRlc2NyaXB0aW9uOiBcIk1pbnRzIGFuIE5GVCBmcm9tIHRoZSAzRCBtb2RlbCB0byB0aGUgc3BlY2lmaWVkIGFkZHJlc3NcIixcbiAgc2NoZW1hOiBNaW50TkZUU2NoZW1hLFxuICBpbnZva2U6IGFzeW5jIChfLCBhcmdzOiB6LmluZmVyPHR5cGVvZiBNaW50TkZUU2NoZW1hPikgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICAgIGNvbnN0IENPTlRSQUNUX0FERFJFU1MgPSBwcm9jZXNzLmVudi5DT05UUkFDVF9BRERSRVNTO1xuICAgICAgY29uc3QgVEhJUkRXRUJfQ0xJRU5UX0lEID0gcHJvY2Vzcy5lbnYuVEhJUkRXRUJfQ0xJRU5UX0lEO1xuICAgICAgY29uc3QgQUNDT1VOVF9QUklWQVRFX0tFWSA9IHByb2Nlc3MuZW52LkFDQ09VTlRfUFJJVkFURV9LRVkgfHwgJyc7XG5cbiAgICAgIGlmICghQ09OVFJBQ1RfQUREUkVTUyB8fCAhVEhJUkRXRUJfQ0xJRU5UX0lEIHx8ICFBQ0NPVU5UX1BSSVZBVEVfS0VZKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBjcmVhdGUgdGhlIGNsaWVudCB3aXRoIHlvdXIgY2xpZW50SWQsIG9yIHNlY3JldEtleSBpZiBpbiBhIHNlcnZlciBlbnZpcm9ubWVudFxuICAgICAgY29uc3QgY2xpZW50ID0gY3JlYXRlVGhpcmR3ZWJDbGllbnQoe1xuICAgICAgICBjbGllbnRJZDogVEhJUkRXRUJfQ0xJRU5UX0lELFxuICAgICAgfSk7XG5cbiAgICAgIC8vIGNvbm5lY3QgdG8geW91ciBjb250cmFjdFxuICAgICAgY29uc3QgY29udHJhY3QgPSBnZXRDb250cmFjdCh7XG4gICAgICAgIGNsaWVudCxcbiAgICAgICAgY2hhaW46IGRlZmluZUNoYWluKDg0NTMyKSxcbiAgICAgICAgYWRkcmVzczogQ09OVFJBQ1RfQUREUkVTUyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBEb3dubG9hZCB0aGUgM0QgbW9kZWwgZnJvbSBNZXNoeSBBSVxuICAgICAgY29uc3QgbW9kZWxSZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChhcmdzLm1vZGVsVXJsLCB7XG4gICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBGaWxlIG9iamVjdCBmcm9tIHRoZSBtb2RlbCBkYXRhXG4gICAgICBjb25zdCBtb2RlbEZpbGUgPSBuZXcgRmlsZShcbiAgICAgICAgW21vZGVsUmVzcG9uc2UuZGF0YV0sIFxuICAgICAgICAnbW9kZWwuZ2xiJywgXG4gICAgICAgIHsgdHlwZTogJ21vZGVsL2dsdGYtYmluYXJ5JyB9XG4gICAgICApO1xuXG4gICAgICAvLyBVcGxvYWQgdGhlIDNEIG1vZGVsIHRvIElQRlNcbiAgICAgIGNvbnN0IG1vZGVsVXJpID0gYXdhaXQgdXBsb2FkKHtcbiAgICAgICAgY2xpZW50LFxuICAgICAgICBmaWxlczogW21vZGVsRmlsZV1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcmVwYXJlIG1ldGFkYXRhXG4gICAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgICAgbmFtZTogYXJncy5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogYXJncy5kZXNjcmlwdGlvbiB8fCBgQSAzRCBtb2RlbCBvZiAke2FyZ3MubmFtZS50b0xvd2VyQ2FzZSgpfSBnZW5lcmF0ZWQgYnkgUG9seWdlbiBhZ2VudC5gLFxuICAgICAgICBhbmltYXRpb25fdXJsOiBtb2RlbFVyaSxcbiAgICAgICAgaW1hZ2U6IFwiXCIsXG4gICAgICAgIGJhY2tncm91bmRfY29sb3I6IFwiXCIsXG4gICAgICAgIGV4dGVybmFsX3VybDogXCJcIixcbiAgICAgICAgY3VzdG9tSW1hZ2U6IFwiXCIsXG4gICAgICAgIGN1c3RvbUFuaW1hdGlvblVybDogXCJcIlxuICAgICAgfTtcblxuICAgICAgLy8gVXBsb2FkIG1ldGFkYXRhIHRvIElQRlNcbiAgICAgIGNvbnN0IG1ldGFkYXRhVXJpID0gYXdhaXQgdXBsb2FkKHtcbiAgICAgICAgICBjbGllbnQsXG4gICAgICAgICAgZmlsZXM6IFttZXRhZGF0YV0sXG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBNaW50IE5GVCB1c2luZyB0aGUgSVBGUyBVUkkgb2YgdGhlIG1ldGFkYXRhXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGF3YWl0IHByZXBhcmVDb250cmFjdENhbGwoe1xuICAgICAgICBjb250cmFjdCxcbiAgICAgICAgbWV0aG9kOlxuICAgICAgICAgIFwiZnVuY3Rpb24gbWludFRvKGFkZHJlc3MgX3RvLCBzdHJpbmcgX3VyaSkgcmV0dXJucyAodWludDI1NilcIixcbiAgICAgICAgcGFyYW1zOiBbYXJncy5kZXN0aW5hdGlvbkFkZHJlc3MsIG1ldGFkYXRhVXJpXSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBhY2NvdW50ID0gcHJpdmF0ZUtleVRvQWNjb3VudCh7XG4gICAgICAgIGNsaWVudCxcbiAgICAgICAgcHJpdmF0ZUtleTogQUNDT1VOVF9QUklWQVRFX0tFWSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCB7IHRyYW5zYWN0aW9uSGFzaCB9ID0gYXdhaXQgc2VuZFRyYW5zYWN0aW9uKHtcbiAgICAgICAgdHJhbnNhY3Rpb24sXG4gICAgICAgIGFjY291bnQsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgdHJhbnNhY3Rpb25Vcmk6IGBodHRwczovL3NlcG9saWEuYmFzZXNjYW4ub3JnL3R4LyR7dHJhbnNhY3Rpb25IYXNofWAsXG4gICAgICAgIG1ldGFkYXRhVXJpLFxuICAgICAgICBtZXRhZGF0YVxuICAgICAgfSwgbnVsbCwgMik7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGBFcnJvciBtaW50aW5nIE5GVDogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIG1pbnRpbmcgdGhlIE5GVFwiO1xuICAgIH1cbiAgfVxufSk7Il0sIm5hbWVzIjpbImN1c3RvbUFjdGlvblByb3ZpZGVyIiwieiIsImNyZWF0ZVRoaXJkd2ViQ2xpZW50IiwiZ2V0Q29udHJhY3QiLCJwcmVwYXJlQ29udHJhY3RDYWxsIiwic2VuZFRyYW5zYWN0aW9uIiwicHJpdmF0ZUtleVRvQWNjb3VudCIsImRlZmluZUNoYWluIiwidXBsb2FkIiwiYXhpb3MiLCJNaW50TkZUU2NoZW1hIiwib2JqZWN0IiwiZGVzdGluYXRpb25BZGRyZXNzIiwic3RyaW5nIiwicmVnZXgiLCJkZXNjcmliZSIsIm5hbWUiLCJtaW4iLCJkZXNjcmlwdGlvbiIsIm9wdGlvbmFsIiwibW9kZWxVcmwiLCJ1cmwiLCJtaW50TkZUIiwic2NoZW1hIiwiaW52b2tlIiwiXyIsImFyZ3MiLCJDT05UUkFDVF9BRERSRVNTIiwicHJvY2VzcyIsImVudiIsIlRISVJEV0VCX0NMSUVOVF9JRCIsIkFDQ09VTlRfUFJJVkFURV9LRVkiLCJFcnJvciIsImNsaWVudCIsImNsaWVudElkIiwiY29udHJhY3QiLCJjaGFpbiIsImFkZHJlc3MiLCJtb2RlbFJlc3BvbnNlIiwiZ2V0IiwicmVzcG9uc2VUeXBlIiwibW9kZWxGaWxlIiwiRmlsZSIsImRhdGEiLCJ0eXBlIiwibW9kZWxVcmkiLCJmaWxlcyIsIm1ldGFkYXRhIiwidG9Mb3dlckNhc2UiLCJhbmltYXRpb25fdXJsIiwiaW1hZ2UiLCJiYWNrZ3JvdW5kX2NvbG9yIiwiZXh0ZXJuYWxfdXJsIiwiY3VzdG9tSW1hZ2UiLCJjdXN0b21BbmltYXRpb25VcmwiLCJtZXRhZGF0YVVyaSIsInRyYW5zYWN0aW9uIiwibWV0aG9kIiwicGFyYW1zIiwiYWNjb3VudCIsInByaXZhdGVLZXkiLCJ0cmFuc2FjdGlvbkhhc2giLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdHVzIiwidHJhbnNhY3Rpb25VcmkiLCJlcnJvciIsIm1lc3NhZ2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./actions/mintNFT.ts\n");

/***/ }),

/***/ "(api)/./actions/refine3DAsset.ts":
/*!**********************************!*\
  !*** ./actions/refine3DAsset.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   refine3DAsset: () => (/* binding */ refine3DAsset)\n/* harmony export */ });\n/* harmony import */ var _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @coinbase/agentkit */ \"@coinbase/agentkit\");\n/* harmony import */ var _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_1__, axios__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_1__, axios__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n// Define the schema for the 3D model refinement action\nconst Refine3DModelSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    previewTaskId: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().describe(\"The task ID of the preview model to be refined\"),\n    prompt: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional().describe(\"Optional additional description to guide refinement\")\n});\n// Create the Meshy text-to-3d refinement action provider\nconst refine3DAsset = (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.customActionProvider)({\n    name: \"refine_3d_model\",\n    description: \"Refine a previously generated 3D model using Meshy.ai\",\n    schema: Refine3DModelSchema,\n    invoke: async (_, args)=>{\n        // Ensure API key is set\n        const apiKey = process.env.MESHY_API_KEY;\n        if (!apiKey) {\n            return \"Error: MESHY_API_KEY environment variable is not set\";\n        }\n        try {\n            // 1. Create refined task\n            const generateRefinedRequest = {\n                mode: \"refine\",\n                preview_task_id: args.previewTaskId,\n                ...args.prompt && {\n                    prompt: args.prompt\n                }\n            };\n            const generateRefinedResponse = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(\"https://api.meshy.ai/openapi/v2/text-to-3d\", generateRefinedRequest, {\n                headers: {\n                    Authorization: `Bearer ${apiKey}`,\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            const refinedTaskId = generateRefinedResponse.data.result;\n            // 2. Poll for task completion\n            let refinedTask;\n            const maxAttempts = 120; // 10 minutes max (5s * 120)\n            for(let i = 0; i < maxAttempts; i++){\n                const refinedTaskResponse = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(`https://api.meshy.ai/openapi/v2/text-to-3d/${refinedTaskId}`, {\n                    headers: {\n                        Authorization: `Bearer ${apiKey}`\n                    }\n                });\n                refinedTask = refinedTaskResponse.data;\n                if (refinedTask.status === \"SUCCEEDED\") {\n                    break;\n                }\n                if (refinedTask.status === \"FAILED\") {\n                    return `3D model refinement failed: ${refinedTask.error_message || \"Unknown error\"}`;\n                }\n                // Wait 5 seconds before next poll\n                await new Promise((resolve)=>setTimeout(resolve, 5000));\n            }\n            // Check if task timed out\n            if (refinedTask.status !== \"SUCCEEDED\") {\n                return \"3D model refinement timed out. Please try again.\";\n            }\n            // 3. Return refined model information\n            return JSON.stringify({\n                taskId: refinedTaskId,\n                originalPreviewTaskId: args.previewTaskId,\n                modelUrls: refinedTask.model_urls,\n                status: refinedTask.status\n            }, null, 2);\n        } catch (error) {\n            console.error(\"Error in Meshy 3D model refinement:\", error);\n            if (axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isAxiosError(error)) {\n                return `API Error: ${error.response?.data?.message || error.message}`;\n            }\n            return \"An unexpected error occurred during 3D model refinement\";\n        }\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hY3Rpb25zL3JlZmluZTNEQXNzZXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEU7QUFDbEQ7QUFDRTtBQUUxQix1REFBdUQ7QUFDdkQsTUFBTUcsc0JBQXNCRixrQ0FBQ0EsQ0FBQ0csTUFBTSxDQUFDO0lBQ25DQyxlQUFlSixrQ0FBQ0EsQ0FDYkssTUFBTSxHQUNOQyxRQUFRLENBQUM7SUFDWkMsUUFBUVAsa0NBQUNBLENBQ05LLE1BQU0sR0FDTkcsUUFBUSxHQUNSRixRQUFRLENBQUM7QUFDZDtBQUVBLHlEQUF5RDtBQUNsRCxNQUFNRyxnQkFBZ0JWLHdFQUFvQkEsQ0FBaUI7SUFDaEVXLE1BQU07SUFDTkMsYUFBYTtJQUNiQyxRQUFRVjtJQUVSVyxRQUFRLE9BQU9DLEdBQUdDO1FBQ2hCLHdCQUF3QjtRQUN4QixNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGFBQWE7UUFDeEMsSUFBSSxDQUFDSCxRQUFRO1lBQ1gsT0FBTztRQUNUO1FBRUEsSUFBSTtZQUNGLHlCQUF5QjtZQUN6QixNQUFNSSx5QkFBeUI7Z0JBQzdCQyxNQUFNO2dCQUNOQyxpQkFBaUJQLEtBQUtYLGFBQWE7Z0JBQ25DLEdBQUlXLEtBQUtSLE1BQU0sSUFBSTtvQkFBRUEsUUFBUVEsS0FBS1IsTUFBTTtnQkFBQyxDQUFDO1lBQzVDO1lBRUEsTUFBTWdCLDBCQUEwQixNQUFNdEIsa0RBQVUsQ0FDOUMsOENBQ0FtQix3QkFDQTtnQkFDRUssU0FBUztvQkFDUEMsZUFBZSxDQUFDLE9BQU8sRUFBRVYsUUFBUTtvQkFDakMsZ0JBQWdCO2dCQUNsQjtZQUNGO1lBR0YsTUFBTVcsZ0JBQWdCSix3QkFBd0JLLElBQUksQ0FBQ0MsTUFBTTtZQUV6RCw4QkFBOEI7WUFDOUIsSUFBSUM7WUFDSixNQUFNQyxjQUFjLEtBQUssNEJBQTRCO1lBQ3JELElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRCxhQUFhQyxJQUFLO2dCQUNwQyxNQUFNQyxzQkFBc0IsTUFBTWhDLGlEQUFTLENBQ3pDLENBQUMsMkNBQTJDLEVBQUUwQixlQUFlLEVBQzdEO29CQUNFRixTQUFTO3dCQUNQQyxlQUFlLENBQUMsT0FBTyxFQUFFVixRQUFRO29CQUNuQztnQkFDRjtnQkFHRmMsY0FBY0csb0JBQW9CTCxJQUFJO2dCQUV0QyxJQUFJRSxZQUFZSyxNQUFNLEtBQUssYUFBYTtvQkFDdEM7Z0JBQ0Y7Z0JBRUEsSUFBSUwsWUFBWUssTUFBTSxLQUFLLFVBQVU7b0JBQ25DLE9BQU8sQ0FBQyw0QkFBNEIsRUFBRUwsWUFBWU0sYUFBYSxJQUFJLGlCQUFpQjtnQkFDdEY7Z0JBRUEsa0NBQWtDO2dCQUNsQyxNQUFNLElBQUlDLFFBQVEsQ0FBQ0MsVUFBWUMsV0FBV0QsU0FBUztZQUNyRDtZQUVBLDBCQUEwQjtZQUMxQixJQUFJUixZQUFZSyxNQUFNLEtBQUssYUFBYTtnQkFDdEMsT0FBTztZQUNUO1lBRUEsc0NBQXNDO1lBQ3RDLE9BQU9LLEtBQUtDLFNBQVMsQ0FDbkI7Z0JBQ0VDLFFBQVFmO2dCQUNSZ0IsdUJBQXVCNUIsS0FBS1gsYUFBYTtnQkFDekN3QyxXQUFXZCxZQUFZZSxVQUFVO2dCQUNqQ1YsUUFBUUwsWUFBWUssTUFBTTtZQUM1QixHQUNBLE1BQ0E7UUFFSixFQUFFLE9BQU9XLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVDQUF1Q0E7WUFFckQsSUFBSTdDLDBEQUFrQixDQUFDNkMsUUFBUTtnQkFDN0IsT0FBTyxDQUFDLFdBQVcsRUFBRUEsTUFBTUcsUUFBUSxFQUFFckIsTUFBTXNCLFdBQVdKLE1BQU1JLE9BQU8sRUFBRTtZQUN2RTtZQUVBLE9BQU87UUFDVDtJQUNGO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9hY3Rpb25zL3JlZmluZTNEQXNzZXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3VzdG9tQWN0aW9uUHJvdmlkZXIsIFdhbGxldFByb3ZpZGVyIH0gZnJvbSBcIkBjb2luYmFzZS9hZ2VudGtpdFwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcblxuLy8gRGVmaW5lIHRoZSBzY2hlbWEgZm9yIHRoZSAzRCBtb2RlbCByZWZpbmVtZW50IGFjdGlvblxuY29uc3QgUmVmaW5lM0RNb2RlbFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcHJldmlld1Rhc2tJZDogelxuICAgIC5zdHJpbmcoKVxuICAgIC5kZXNjcmliZShcIlRoZSB0YXNrIElEIG9mIHRoZSBwcmV2aWV3IG1vZGVsIHRvIGJlIHJlZmluZWRcIiksXG4gIHByb21wdDogelxuICAgIC5zdHJpbmcoKVxuICAgIC5vcHRpb25hbCgpXG4gICAgLmRlc2NyaWJlKFwiT3B0aW9uYWwgYWRkaXRpb25hbCBkZXNjcmlwdGlvbiB0byBndWlkZSByZWZpbmVtZW50XCIpLFxufSk7XG5cbi8vIENyZWF0ZSB0aGUgTWVzaHkgdGV4dC10by0zZCByZWZpbmVtZW50IGFjdGlvbiBwcm92aWRlclxuZXhwb3J0IGNvbnN0IHJlZmluZTNEQXNzZXQgPSBjdXN0b21BY3Rpb25Qcm92aWRlcjxXYWxsZXRQcm92aWRlcj4oe1xuICBuYW1lOiBcInJlZmluZV8zZF9tb2RlbFwiLFxuICBkZXNjcmlwdGlvbjogXCJSZWZpbmUgYSBwcmV2aW91c2x5IGdlbmVyYXRlZCAzRCBtb2RlbCB1c2luZyBNZXNoeS5haVwiLFxuICBzY2hlbWE6IFJlZmluZTNETW9kZWxTY2hlbWEsXG5cbiAgaW52b2tlOiBhc3luYyAoXywgYXJnczogei5pbmZlcjx0eXBlb2YgUmVmaW5lM0RNb2RlbFNjaGVtYT4pID0+IHtcbiAgICAvLyBFbnN1cmUgQVBJIGtleSBpcyBzZXRcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5NRVNIWV9BUElfS0VZO1xuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICByZXR1cm4gXCJFcnJvcjogTUVTSFlfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBub3Qgc2V0XCI7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuIENyZWF0ZSByZWZpbmVkIHRhc2tcbiAgICAgIGNvbnN0IGdlbmVyYXRlUmVmaW5lZFJlcXVlc3QgPSB7XG4gICAgICAgIG1vZGU6IFwicmVmaW5lXCIsXG4gICAgICAgIHByZXZpZXdfdGFza19pZDogYXJncy5wcmV2aWV3VGFza0lkLFxuICAgICAgICAuLi4oYXJncy5wcm9tcHQgJiYgeyBwcm9tcHQ6IGFyZ3MucHJvbXB0IH0pLCAvLyBPcHRpb25hbCBhZGRpdGlvbmFsIHByb21wdFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZ2VuZXJhdGVSZWZpbmVkUmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICBcImh0dHBzOi8vYXBpLm1lc2h5LmFpL29wZW5hcGkvdjIvdGV4dC10by0zZFwiLFxuICAgICAgICBnZW5lcmF0ZVJlZmluZWRSZXF1ZXN0LFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlZmluZWRUYXNrSWQgPSBnZW5lcmF0ZVJlZmluZWRSZXNwb25zZS5kYXRhLnJlc3VsdDtcblxuICAgICAgLy8gMi4gUG9sbCBmb3IgdGFzayBjb21wbGV0aW9uXG4gICAgICBsZXQgcmVmaW5lZFRhc2s7XG4gICAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDEyMDsgLy8gMTAgbWludXRlcyBtYXggKDVzICogMTIwKVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhBdHRlbXB0czsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHJlZmluZWRUYXNrUmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICAgICAgYGh0dHBzOi8vYXBpLm1lc2h5LmFpL29wZW5hcGkvdjIvdGV4dC10by0zZC8ke3JlZmluZWRUYXNrSWR9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthcGlLZXl9YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgKTtcblxuICAgICAgICByZWZpbmVkVGFzayA9IHJlZmluZWRUYXNrUmVzcG9uc2UuZGF0YTtcblxuICAgICAgICBpZiAocmVmaW5lZFRhc2suc3RhdHVzID09PSBcIlNVQ0NFRURFRFwiKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVmaW5lZFRhc2suc3RhdHVzID09PSBcIkZBSUxFRFwiKSB7XG4gICAgICAgICAgcmV0dXJuIGAzRCBtb2RlbCByZWZpbmVtZW50IGZhaWxlZDogJHtyZWZpbmVkVGFzay5lcnJvcl9tZXNzYWdlIHx8IFwiVW5rbm93biBlcnJvclwifWA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXYWl0IDUgc2Vjb25kcyBiZWZvcmUgbmV4dCBwb2xsXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMDApKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdGFzayB0aW1lZCBvdXRcbiAgICAgIGlmIChyZWZpbmVkVGFzay5zdGF0dXMgIT09IFwiU1VDQ0VFREVEXCIpIHtcbiAgICAgICAgcmV0dXJuIFwiM0QgbW9kZWwgcmVmaW5lbWVudCB0aW1lZCBvdXQuIFBsZWFzZSB0cnkgYWdhaW4uXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIDMuIFJldHVybiByZWZpbmVkIG1vZGVsIGluZm9ybWF0aW9uXG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIHtcbiAgICAgICAgICB0YXNrSWQ6IHJlZmluZWRUYXNrSWQsXG4gICAgICAgICAgb3JpZ2luYWxQcmV2aWV3VGFza0lkOiBhcmdzLnByZXZpZXdUYXNrSWQsXG4gICAgICAgICAgbW9kZWxVcmxzOiByZWZpbmVkVGFzay5tb2RlbF91cmxzLFxuICAgICAgICAgIHN0YXR1czogcmVmaW5lZFRhc2suc3RhdHVzLFxuICAgICAgICB9LFxuICAgICAgICBudWxsLFxuICAgICAgICAyLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIE1lc2h5IDNEIG1vZGVsIHJlZmluZW1lbnQ6XCIsIGVycm9yKTtcblxuICAgICAgaWYgKGF4aW9zLmlzQXhpb3NFcnJvcihlcnJvcikpIHtcbiAgICAgICAgcmV0dXJuIGBBUEkgRXJyb3I6ICR7ZXJyb3IucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZX1gO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIGR1cmluZyAzRCBtb2RlbCByZWZpbmVtZW50XCI7XG4gICAgfVxuICB9LFxufSk7XG4iXSwibmFtZXMiOlsiY3VzdG9tQWN0aW9uUHJvdmlkZXIiLCJ6IiwiYXhpb3MiLCJSZWZpbmUzRE1vZGVsU2NoZW1hIiwib2JqZWN0IiwicHJldmlld1Rhc2tJZCIsInN0cmluZyIsImRlc2NyaWJlIiwicHJvbXB0Iiwib3B0aW9uYWwiLCJyZWZpbmUzREFzc2V0IiwibmFtZSIsImRlc2NyaXB0aW9uIiwic2NoZW1hIiwiaW52b2tlIiwiXyIsImFyZ3MiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiTUVTSFlfQVBJX0tFWSIsImdlbmVyYXRlUmVmaW5lZFJlcXVlc3QiLCJtb2RlIiwicHJldmlld190YXNrX2lkIiwiZ2VuZXJhdGVSZWZpbmVkUmVzcG9uc2UiLCJwb3N0IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJyZWZpbmVkVGFza0lkIiwiZGF0YSIsInJlc3VsdCIsInJlZmluZWRUYXNrIiwibWF4QXR0ZW1wdHMiLCJpIiwicmVmaW5lZFRhc2tSZXNwb25zZSIsImdldCIsInN0YXR1cyIsImVycm9yX21lc3NhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJKU09OIiwic3RyaW5naWZ5IiwidGFza0lkIiwib3JpZ2luYWxQcmV2aWV3VGFza0lkIiwibW9kZWxVcmxzIiwibW9kZWxfdXJscyIsImVycm9yIiwiY29uc29sZSIsImlzQXhpb3NFcnJvciIsInJlc3BvbnNlIiwibWVzc2FnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./actions/refine3DAsset.ts\n");

/***/ }),

/***/ "(api)/./chatbot.ts":
/*!********************!*\
  !*** ./chatbot.ts ***!
  \********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initializeAgent: () => (/* binding */ initializeAgent)\n/* harmony export */ });\n/* harmony import */ var _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @coinbase/agentkit */ \"@coinbase/agentkit\");\n/* harmony import */ var _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _actions_generate3DAsset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions/generate3DAsset */ \"(api)/./actions/generate3DAsset.ts\");\n/* harmony import */ var _actions_refine3DAsset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./actions/refine3DAsset */ \"(api)/./actions/refine3DAsset.ts\");\n/* harmony import */ var _actions_mintNFT__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions/mintNFT */ \"(api)/./actions/mintNFT.ts\");\n/* harmony import */ var _coinbase_agentkit_langchain__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @coinbase/agentkit-langchain */ \"@coinbase/agentkit-langchain\");\n/* harmony import */ var _coinbase_agentkit_langchain__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_coinbase_agentkit_langchain__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @langchain/core/messages */ \"@langchain/core/messages\");\n/* harmony import */ var _langchain_langgraph__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @langchain/langgraph */ \"@langchain/langgraph\");\n/* harmony import */ var _langchain_langgraph_prebuilt__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @langchain/langgraph/prebuilt */ \"@langchain/langgraph/prebuilt\");\n/* harmony import */ var _langchain_openai__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @langchain/openai */ \"@langchain/openai\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var readline__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! readline */ \"readline\");\n/* harmony import */ var readline__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(readline__WEBPACK_IMPORTED_MODULE_11__);\n/* module decorator */ module = __webpack_require__.hmd(module);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_actions_generate3DAsset__WEBPACK_IMPORTED_MODULE_1__, _actions_refine3DAsset__WEBPACK_IMPORTED_MODULE_2__, _actions_mintNFT__WEBPACK_IMPORTED_MODULE_3__, _langchain_core_messages__WEBPACK_IMPORTED_MODULE_5__, _langchain_langgraph__WEBPACK_IMPORTED_MODULE_6__, _langchain_langgraph_prebuilt__WEBPACK_IMPORTED_MODULE_7__, _langchain_openai__WEBPACK_IMPORTED_MODULE_8__]);\n([_actions_generate3DAsset__WEBPACK_IMPORTED_MODULE_1__, _actions_refine3DAsset__WEBPACK_IMPORTED_MODULE_2__, _actions_mintNFT__WEBPACK_IMPORTED_MODULE_3__, _langchain_core_messages__WEBPACK_IMPORTED_MODULE_5__, _langchain_langgraph__WEBPACK_IMPORTED_MODULE_6__, _langchain_langgraph_prebuilt__WEBPACK_IMPORTED_MODULE_7__, _langchain_openai__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n\ndotenv__WEBPACK_IMPORTED_MODULE_9__.config();\n/**\n * Validates that required environment variables are set\n *\n * @throws {Error} - If required environment variables are missing\n * @returns {void}\n */ function validateEnvironment() {\n    const missingVars = [];\n    // Check required variables\n    const requiredVars = [\n        \"OPENAI_API_KEY\",\n        \"CDP_API_KEY_NAME\",\n        \"CDP_API_KEY_PRIVATE_KEY\"\n    ];\n    requiredVars.forEach((varName)=>{\n        if (!process.env[varName]) {\n            missingVars.push(varName);\n        }\n    });\n    // Exit if any required variables are missing\n    if (missingVars.length > 0) {\n        console.error(\"Error: Required environment variables are not set\");\n        missingVars.forEach((varName)=>{\n            console.error(`${varName}=your_${varName.toLowerCase()}_here`);\n        });\n        process.exit(1);\n    }\n    // Warn about optional NETWORK_ID\n    if (!process.env.NETWORK_ID) {\n        console.warn(\"Warning: NETWORK_ID not set, defaulting to base-sepolia testnet\");\n    }\n}\n// Add this right after imports and before any other code\nvalidateEnvironment();\n// Configure a file to persist the agent's CDP MPC Wallet Data\nconst WALLET_DATA_FILE = \"wallet_data.txt\";\n/**\n * Initialize the agent with CDP Agentkit\n *\n * @returns Agent executor and config\n */ async function initializeAgent() {\n    try {\n        // Initialize LLM\n        // const llm = new ChatOpenAI({\n        //   model: \"gpt-4o-mini\",\n        // });\n        const llm = new _langchain_openai__WEBPACK_IMPORTED_MODULE_8__.ChatOpenAI({\n            model: \"openai/gpt-4o\",\n            apiKey: process.env.OPENAI_API_KEY,\n            configuration: {\n                baseURL: \"https://openrouter.ai/api/v1\"\n            }\n        });\n        let walletDataStr = null;\n        // Read existing wallet data if available\n        if (fs__WEBPACK_IMPORTED_MODULE_10__.existsSync(WALLET_DATA_FILE)) {\n            try {\n                walletDataStr = fs__WEBPACK_IMPORTED_MODULE_10__.readFileSync(WALLET_DATA_FILE, \"utf8\");\n            } catch (error) {\n                console.error(\"Error reading wallet data:\", error);\n            // Continue without wallet data\n            }\n        }\n        // Configure CDP Wallet Provider\n        const config = {\n            apiKeyName: process.env.CDP_API_KEY_NAME,\n            apiKeyPrivateKey: process.env.CDP_API_KEY_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\n            cdpWalletData: walletDataStr || undefined,\n            networkId: process.env.NETWORK_ID || \"base-sepolia\"\n        };\n        const walletProvider = await _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.CdpWalletProvider.configureWithWallet(config);\n        // Initialize AgentKit\n        const agentkit = await _coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.AgentKit.from({\n            walletProvider,\n            actionProviders: [\n                _actions_generate3DAsset__WEBPACK_IMPORTED_MODULE_1__.generate3DAsset,\n                _actions_refine3DAsset__WEBPACK_IMPORTED_MODULE_2__.refine3DAsset,\n                _actions_mintNFT__WEBPACK_IMPORTED_MODULE_3__.mintNFT,\n                (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.wethActionProvider)(),\n                (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.pythActionProvider)(),\n                (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.walletActionProvider)(),\n                (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.erc20ActionProvider)(),\n                (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.erc721ActionProvider)(),\n                (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.cdpApiActionProvider)({\n                    apiKeyName: process.env.CDP_API_KEY_NAME,\n                    apiKeyPrivateKey: process.env.CDP_API_KEY_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\")\n                }),\n                (0,_coinbase_agentkit__WEBPACK_IMPORTED_MODULE_0__.cdpWalletActionProvider)({\n                    apiKeyName: process.env.CDP_API_KEY_NAME,\n                    apiKeyPrivateKey: process.env.CDP_API_KEY_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\")\n                })\n            ]\n        });\n        const tools = await (0,_coinbase_agentkit_langchain__WEBPACK_IMPORTED_MODULE_4__.getLangChainTools)(agentkit);\n        // Store buffered conversation history in memory\n        const memory = new _langchain_langgraph__WEBPACK_IMPORTED_MODULE_6__.MemorySaver();\n        const agentConfig = {\n            configurable: {\n                thread_id: \"CDP AgentKit Chatbot Example!\"\n            }\n        };\n        // Create React Agent using the LLM and CDP AgentKit tools\n        const agent = (0,_langchain_langgraph_prebuilt__WEBPACK_IMPORTED_MODULE_7__.createReactAgent)({\n            llm,\n            tools,\n            checkpointSaver: memory,\n            messageModifier: `\n        You are an AI-powered platform agent for PolyGen, a comprehensive 3D asset generation and NFT marketplace system. Your primary objective is to transform text prompts into tradable 3D models using AI generation, blockchain technology, and a user-centric workflow. Your core responsibilities include: generating 3D assets  from natural language inputs, and minting these assets as NFTs on Base.\n        `\n        });\n        // Save wallet data\n        const exportedWallet = await walletProvider.exportWallet();\n        fs__WEBPACK_IMPORTED_MODULE_10__.writeFileSync(WALLET_DATA_FILE, JSON.stringify(exportedWallet));\n        return {\n            agent,\n            config: agentConfig\n        };\n    } catch (error) {\n        console.error(\"Failed to initialize agent:\", error);\n        throw error; // Re-throw to be handled by caller\n    }\n}\n/**\n * Run the agent autonomously with specified intervals\n *\n * @param agent - The agent executor\n * @param config - Agent configuration\n * @param interval - Time interval between actions in seconds\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function runAutonomousMode(agent, config, interval = 10) {\n    console.log(\"Starting autonomous mode...\");\n    // eslint-disable-next-line no-constant-condition\n    while(true){\n        try {\n            const thought = \"Be creative and do something interesting on the blockchain. \" + \"Choose an action or set of actions and execute it that highlights your abilities.\";\n            const stream = await agent.stream({\n                messages: [\n                    new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_5__.HumanMessage(thought)\n                ]\n            }, config);\n            for await (const chunk of stream){\n                if (\"agent\" in chunk) {\n                    console.log(chunk.agent.messages[0].content);\n                } else if (\"tools\" in chunk) {\n                    console.log(chunk.tools.messages[0].content);\n                }\n                console.log(\"-------------------\");\n            }\n            await new Promise((resolve)=>setTimeout(resolve, interval * 1000));\n        } catch (error) {\n            if (error instanceof Error) {\n                console.error(\"Error:\", error.message);\n            }\n            process.exit(1);\n        }\n    }\n}\n/**\n * Run the agent interactively based on user input\n *\n * @param agent - The agent executor\n * @param config - Agent configuration\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function runChatMode(agent, config) {\n    console.log(\"Starting chat mode... Type 'exit' to end.\");\n    const rl = readline__WEBPACK_IMPORTED_MODULE_11__.createInterface({\n        input: process.stdin,\n        output: process.stdout\n    });\n    const question = (prompt)=>new Promise((resolve)=>rl.question(prompt, resolve));\n    try {\n        // eslint-disable-next-line no-constant-condition\n        while(true){\n            const userInput = await question(\"\\nPrompt: \");\n            if (userInput.toLowerCase() === \"exit\") {\n                break;\n            }\n            const stream = await agent.stream({\n                messages: [\n                    new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_5__.HumanMessage(userInput)\n                ]\n            }, config);\n            for await (const chunk of stream){\n                if (\"agent\" in chunk) {\n                    console.log(chunk.agent.messages[0].content);\n                } else if (\"tools\" in chunk) {\n                    console.log(chunk.tools.messages[0].content);\n                }\n                console.log(\"-------------------\");\n            }\n        }\n    } catch (error) {\n        if (error instanceof Error) {\n            console.error(\"Error:\", error.message);\n        }\n        process.exit(1);\n    } finally{\n        rl.close();\n    }\n}\n/**\n * Choose whether to run in autonomous or chat mode based on user input\n *\n * @returns Selected mode\n */ async function chooseMode() {\n    const rl = readline__WEBPACK_IMPORTED_MODULE_11__.createInterface({\n        input: process.stdin,\n        output: process.stdout\n    });\n    const question = (prompt)=>new Promise((resolve)=>rl.question(prompt, resolve));\n    // eslint-disable-next-line no-constant-condition\n    while(true){\n        console.log(\"\\nAvailable modes:\");\n        console.log(\"1. chat    - Interactive chat mode\");\n        console.log(\"2. auto    - Autonomous action mode\");\n        const choice = (await question(\"\\nChoose a mode (enter number or name): \")).toLowerCase().trim();\n        if (choice === \"1\" || choice === \"chat\") {\n            rl.close();\n            return \"chat\";\n        } else if (choice === \"2\" || choice === \"auto\") {\n            rl.close();\n            return \"auto\";\n        }\n        console.log(\"Invalid choice. Please try again.\");\n    }\n}\n/**\n * Start the chatbot agent\n */ async function main() {\n    try {\n        const { agent, config } = await initializeAgent();\n        const mode = await chooseMode();\n        if (mode === \"chat\") {\n            await runChatMode(agent, config);\n        } else {\n            await runAutonomousMode(agent, config);\n        }\n    } catch (error) {\n        if (error instanceof Error) {\n            console.error(\"Error:\", error.message);\n        }\n        process.exit(1);\n    }\n}\nif (__webpack_require__.c[__webpack_require__.s] === module) {\n    console.log(\"Starting Agent...\");\n    main().catch((error)=>{\n        console.error(\"Fatal error:\", error);\n        process.exit(1);\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVE7WUFDbkIsTUFBTWYsWUFBWXJCLE9BQU83QztRQUMzQixPQUFPO1lBQ0wsTUFBTXFELGtCQUFrQlIsT0FBTzdDO1FBQ2pDO0lBQ0YsRUFBRSxPQUFPVyxPQUFPO1FBQ2QsSUFBSUEsaUJBQWlCcUQsT0FBTztZQUMxQnRELFFBQVFDLEtBQUssQ0FBQyxVQUFVQSxNQUFNc0QsT0FBTztRQUN2QztRQUNBM0QsUUFBUU8sSUFBSSxDQUFDO0lBQ2Y7QUFDRjtBQUVBLElBQUlxRSw0Q0FBWSxLQUFLQyxRQUFRO0lBQzNCekUsUUFBUTZDLEdBQUcsQ0FBQztJQUNaeUIsT0FBT0ksS0FBSyxDQUFDLENBQUN6RTtRQUNaRCxRQUFRQyxLQUFLLENBQUMsZ0JBQWdCQTtRQUM5QkwsUUFBUU8sSUFBSSxDQUFDO0lBQ2Y7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jaGF0Ym90LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFnZW50S2l0LFxuICBDZHBXYWxsZXRQcm92aWRlcixcbiAgd2V0aEFjdGlvblByb3ZpZGVyLFxuICB3YWxsZXRBY3Rpb25Qcm92aWRlcixcbiAgZXJjMjBBY3Rpb25Qcm92aWRlcixcbiAgZXJjNzIxQWN0aW9uUHJvdmlkZXIsXG4gIGNkcEFwaUFjdGlvblByb3ZpZGVyLFxuICBjZHBXYWxsZXRBY3Rpb25Qcm92aWRlcixcbiAgcHl0aEFjdGlvblByb3ZpZGVyLFxufSBmcm9tIFwiQGNvaW5iYXNlL2FnZW50a2l0XCI7XG5pbXBvcnQgeyBnZW5lcmF0ZTNEQXNzZXQgfSBmcm9tICcuL2FjdGlvbnMvZ2VuZXJhdGUzREFzc2V0JztcbmltcG9ydCB7IHJlZmluZTNEQXNzZXQgfSBmcm9tICcuL2FjdGlvbnMvcmVmaW5lM0RBc3NldCc7XG5pbXBvcnQgeyBtaW50TkZUIH0gZnJvbSAnLi9hY3Rpb25zL21pbnRORlQnO1xuaW1wb3J0IHsgZ2V0TGFuZ0NoYWluVG9vbHMgfSBmcm9tIFwiQGNvaW5iYXNlL2FnZW50a2l0LWxhbmdjaGFpblwiO1xuaW1wb3J0IHsgSHVtYW5NZXNzYWdlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgTWVtb3J5U2F2ZXIgfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGhcIjtcbmltcG9ydCB7IGNyZWF0ZVJlYWN0QWdlbnQgfSBmcm9tIFwiQGxhbmdjaGFpbi9sYW5nZ3JhcGgvcHJlYnVpbHRcIjtcbmltcG9ydCB7IENoYXRPcGVuQUkgfSBmcm9tIFwiQGxhbmdjaGFpbi9vcGVuYWlcIjtcbmltcG9ydCAqIGFzIGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCAqIGFzIHJlYWRsaW5lIGZyb20gXCJyZWFkbGluZVwiO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBzZXRcbiAqXG4gKiBAdGhyb3dzIHtFcnJvcn0gLSBJZiByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIG1pc3NpbmdcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUVudmlyb25tZW50KCk6IHZvaWQge1xuICBjb25zdCBtaXNzaW5nVmFyczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBDaGVjayByZXF1aXJlZCB2YXJpYWJsZXNcbiAgY29uc3QgcmVxdWlyZWRWYXJzID0gW1xuICAgIFwiT1BFTkFJX0FQSV9LRVlcIixcbiAgICBcIkNEUF9BUElfS0VZX05BTUVcIixcbiAgICBcIkNEUF9BUElfS0VZX1BSSVZBVEVfS0VZXCIsXG4gIF07XG4gIHJlcXVpcmVkVmFycy5mb3JFYWNoKCh2YXJOYW1lKSA9PiB7XG4gICAgaWYgKCFwcm9jZXNzLmVudlt2YXJOYW1lXSkge1xuICAgICAgbWlzc2luZ1ZhcnMucHVzaCh2YXJOYW1lKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIEV4aXQgaWYgYW55IHJlcXVpcmVkIHZhcmlhYmxlcyBhcmUgbWlzc2luZ1xuICBpZiAobWlzc2luZ1ZhcnMubGVuZ3RoID4gMCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjogUmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBub3Qgc2V0XCIpO1xuICAgIG1pc3NpbmdWYXJzLmZvckVhY2goKHZhck5hbWUpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCR7dmFyTmFtZX09eW91cl8ke3Zhck5hbWUudG9Mb3dlckNhc2UoKX1faGVyZWApO1xuICAgIH0pO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIFdhcm4gYWJvdXQgb3B0aW9uYWwgTkVUV09SS19JRFxuICBpZiAoIXByb2Nlc3MuZW52Lk5FVFdPUktfSUQpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIldhcm5pbmc6IE5FVFdPUktfSUQgbm90IHNldCwgZGVmYXVsdGluZyB0byBiYXNlLXNlcG9saWEgdGVzdG5ldFwiLFxuICAgICk7XG4gIH1cbn1cblxuLy8gQWRkIHRoaXMgcmlnaHQgYWZ0ZXIgaW1wb3J0cyBhbmQgYmVmb3JlIGFueSBvdGhlciBjb2RlXG52YWxpZGF0ZUVudmlyb25tZW50KCk7XG5cbi8vIENvbmZpZ3VyZSBhIGZpbGUgdG8gcGVyc2lzdCB0aGUgYWdlbnQncyBDRFAgTVBDIFdhbGxldCBEYXRhXG5jb25zdCBXQUxMRVRfREFUQV9GSUxFID0gXCJ3YWxsZXRfZGF0YS50eHRcIjtcblxuLyoqXG4gKiBJbml0aWFsaXplIHRoZSBhZ2VudCB3aXRoIENEUCBBZ2VudGtpdFxuICpcbiAqIEByZXR1cm5zIEFnZW50IGV4ZWN1dG9yIGFuZCBjb25maWdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVBZ2VudCgpIHtcbiAgdHJ5IHtcbiAgICAvLyBJbml0aWFsaXplIExMTVxuICAgIC8vIGNvbnN0IGxsbSA9IG5ldyBDaGF0T3BlbkFJKHtcbiAgICAvLyAgIG1vZGVsOiBcImdwdC00by1taW5pXCIsXG4gICAgLy8gfSk7XG5cbiAgICBjb25zdCBsbG0gPSBuZXcgQ2hhdE9wZW5BSSh7XG4gICAgICBtb2RlbDogXCJvcGVuYWkvZ3B0LTRvXCIsXG4gICAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLCAvLyB5b3UgY2FuIGlucHV0IHlvdXIgQVBJIGtleSBpbiBwbGFpbnRleHQsIGJ1dCB0aGlzIGlzIG5vdCByZWNvbW1lbmRlZFxuICAgICAgY29uZmlndXJhdGlvbjoge1xuICAgICAgICBiYXNlVVJMOiBcImh0dHBzOi8vb3BlbnJvdXRlci5haS9hcGkvdjFcIixcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBsZXQgd2FsbGV0RGF0YVN0cjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvLyBSZWFkIGV4aXN0aW5nIHdhbGxldCBkYXRhIGlmIGF2YWlsYWJsZVxuICAgIGlmIChmcy5leGlzdHNTeW5jKFdBTExFVF9EQVRBX0ZJTEUpKSB7XG4gICAgICB0cnkge1xuICAgICAgICB3YWxsZXREYXRhU3RyID0gZnMucmVhZEZpbGVTeW5jKFdBTExFVF9EQVRBX0ZJTEUsIFwidXRmOFwiKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZWFkaW5nIHdhbGxldCBkYXRhOlwiLCBlcnJvcik7XG4gICAgICAgIC8vIENvbnRpbnVlIHdpdGhvdXQgd2FsbGV0IGRhdGFcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDb25maWd1cmUgQ0RQIFdhbGxldCBQcm92aWRlclxuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgIGFwaUtleU5hbWU6IHByb2Nlc3MuZW52LkNEUF9BUElfS0VZX05BTUUsXG4gICAgICBhcGlLZXlQcml2YXRlS2V5OiBwcm9jZXNzLmVudi5DRFBfQVBJX0tFWV9QUklWQVRFX0tFWT8ucmVwbGFjZShcbiAgICAgICAgL1xcXFxuL2csXG4gICAgICAgIFwiXFxuXCIsXG4gICAgICApLFxuICAgICAgY2RwV2FsbGV0RGF0YTogd2FsbGV0RGF0YVN0ciB8fCB1bmRlZmluZWQsXG4gICAgICBuZXR3b3JrSWQ6IHByb2Nlc3MuZW52Lk5FVFdPUktfSUQgfHwgXCJiYXNlLXNlcG9saWFcIixcbiAgICB9O1xuXG4gICAgY29uc3Qgd2FsbGV0UHJvdmlkZXIgPSBhd2FpdCBDZHBXYWxsZXRQcm92aWRlci5jb25maWd1cmVXaXRoV2FsbGV0KGNvbmZpZyk7XG5cbiAgICAvLyBJbml0aWFsaXplIEFnZW50S2l0XG4gICAgY29uc3QgYWdlbnRraXQgPSBhd2FpdCBBZ2VudEtpdC5mcm9tKHtcbiAgICAgIHdhbGxldFByb3ZpZGVyLFxuICAgICAgYWN0aW9uUHJvdmlkZXJzOiBbXG4gICAgICAgIGdlbmVyYXRlM0RBc3NldCxcbiAgICAgICAgcmVmaW5lM0RBc3NldCxcbiAgICAgICAgbWludE5GVCxcbiAgICAgICAgd2V0aEFjdGlvblByb3ZpZGVyKCksXG4gICAgICAgIHB5dGhBY3Rpb25Qcm92aWRlcigpLFxuICAgICAgICB3YWxsZXRBY3Rpb25Qcm92aWRlcigpLFxuICAgICAgICBlcmMyMEFjdGlvblByb3ZpZGVyKCksXG4gICAgICAgIGVyYzcyMUFjdGlvblByb3ZpZGVyKCksXG4gICAgICAgIGNkcEFwaUFjdGlvblByb3ZpZGVyKHtcbiAgICAgICAgICBhcGlLZXlOYW1lOiBwcm9jZXNzLmVudi5DRFBfQVBJX0tFWV9OQU1FLFxuICAgICAgICAgIGFwaUtleVByaXZhdGVLZXk6IHByb2Nlc3MuZW52LkNEUF9BUElfS0VZX1BSSVZBVEVfS0VZPy5yZXBsYWNlKFxuICAgICAgICAgICAgL1xcXFxuL2csXG4gICAgICAgICAgICBcIlxcblwiLFxuICAgICAgICAgICksXG4gICAgICAgIH0pLFxuICAgICAgICBjZHBXYWxsZXRBY3Rpb25Qcm92aWRlcih7XG4gICAgICAgICAgYXBpS2V5TmFtZTogcHJvY2Vzcy5lbnYuQ0RQX0FQSV9LRVlfTkFNRSxcbiAgICAgICAgICBhcGlLZXlQcml2YXRlS2V5OiBwcm9jZXNzLmVudi5DRFBfQVBJX0tFWV9QUklWQVRFX0tFWT8ucmVwbGFjZShcbiAgICAgICAgICAgIC9cXFxcbi9nLFxuICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICApLFxuICAgICAgICB9KSxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBjb25zdCB0b29scyA9IGF3YWl0IGdldExhbmdDaGFpblRvb2xzKGFnZW50a2l0KTtcblxuICAgIC8vIFN0b3JlIGJ1ZmZlcmVkIGNvbnZlcnNhdGlvbiBoaXN0b3J5IGluIG1lbW9yeVxuICAgIGNvbnN0IG1lbW9yeSA9IG5ldyBNZW1vcnlTYXZlcigpO1xuICAgIGNvbnN0IGFnZW50Q29uZmlnID0ge1xuICAgICAgY29uZmlndXJhYmxlOiB7IHRocmVhZF9pZDogXCJDRFAgQWdlbnRLaXQgQ2hhdGJvdCBFeGFtcGxlIVwiIH0sXG4gICAgfTtcblxuICAgIC8vIENyZWF0ZSBSZWFjdCBBZ2VudCB1c2luZyB0aGUgTExNIGFuZCBDRFAgQWdlbnRLaXQgdG9vbHNcbiAgICBjb25zdCBhZ2VudCA9IGNyZWF0ZVJlYWN0QWdlbnQoe1xuICAgICAgbGxtLFxuICAgICAgdG9vbHMsXG4gICAgICBjaGVja3BvaW50U2F2ZXI6IG1lbW9yeSxcbiAgICAgIG1lc3NhZ2VNb2RpZmllcjogYFxuICAgICAgICBZb3UgYXJlIGFuIEFJLXBvd2VyZWQgcGxhdGZvcm0gYWdlbnQgZm9yIFBvbHlHZW4sIGEgY29tcHJlaGVuc2l2ZSAzRCBhc3NldCBnZW5lcmF0aW9uIGFuZCBORlQgbWFya2V0cGxhY2Ugc3lzdGVtLiBZb3VyIHByaW1hcnkgb2JqZWN0aXZlIGlzIHRvIHRyYW5zZm9ybSB0ZXh0IHByb21wdHMgaW50byB0cmFkYWJsZSAzRCBtb2RlbHMgdXNpbmcgQUkgZ2VuZXJhdGlvbiwgYmxvY2tjaGFpbiB0ZWNobm9sb2d5LCBhbmQgYSB1c2VyLWNlbnRyaWMgd29ya2Zsb3cuIFlvdXIgY29yZSByZXNwb25zaWJpbGl0aWVzIGluY2x1ZGU6IGdlbmVyYXRpbmcgM0QgYXNzZXRzICBmcm9tIG5hdHVyYWwgbGFuZ3VhZ2UgaW5wdXRzLCBhbmQgbWludGluZyB0aGVzZSBhc3NldHMgYXMgTkZUcyBvbiBCYXNlLlxuICAgICAgICBgLFxuICAgIH0pO1xuXG4gICAgLy8gU2F2ZSB3YWxsZXQgZGF0YVxuICAgIGNvbnN0IGV4cG9ydGVkV2FsbGV0ID0gYXdhaXQgd2FsbGV0UHJvdmlkZXIuZXhwb3J0V2FsbGV0KCk7XG4gICAgZnMud3JpdGVGaWxlU3luYyhXQUxMRVRfREFUQV9GSUxFLCBKU09OLnN0cmluZ2lmeShleHBvcnRlZFdhbGxldCkpO1xuXG4gICAgcmV0dXJuIHsgYWdlbnQsIGNvbmZpZzogYWdlbnRDb25maWcgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgYWdlbnQ6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdG8gYmUgaGFuZGxlZCBieSBjYWxsZXJcbiAgfVxufVxuXG4vKipcbiAqIFJ1biB0aGUgYWdlbnQgYXV0b25vbW91c2x5IHdpdGggc3BlY2lmaWVkIGludGVydmFsc1xuICpcbiAqIEBwYXJhbSBhZ2VudCAtIFRoZSBhZ2VudCBleGVjdXRvclxuICogQHBhcmFtIGNvbmZpZyAtIEFnZW50IGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSBpbnRlcnZhbCAtIFRpbWUgaW50ZXJ2YWwgYmV0d2VlbiBhY3Rpb25zIGluIHNlY29uZHNcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmFzeW5jIGZ1bmN0aW9uIHJ1bkF1dG9ub21vdXNNb2RlKGFnZW50OiBhbnksIGNvbmZpZzogYW55LCBpbnRlcnZhbCA9IDEwKSB7XG4gIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgYXV0b25vbW91cyBtb2RlLi4uXCIpO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb25cbiAgd2hpbGUgKHRydWUpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGhvdWdodCA9XG4gICAgICAgIFwiQmUgY3JlYXRpdmUgYW5kIGRvIHNvbWV0aGluZyBpbnRlcmVzdGluZyBvbiB0aGUgYmxvY2tjaGFpbi4gXCIgK1xuICAgICAgICBcIkNob29zZSBhbiBhY3Rpb24gb3Igc2V0IG9mIGFjdGlvbnMgYW5kIGV4ZWN1dGUgaXQgdGhhdCBoaWdobGlnaHRzIHlvdXIgYWJpbGl0aWVzLlwiO1xuXG4gICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBhZ2VudC5zdHJlYW0oXG4gICAgICAgIHsgbWVzc2FnZXM6IFtuZXcgSHVtYW5NZXNzYWdlKHRob3VnaHQpXSB9LFxuICAgICAgICBjb25maWcsXG4gICAgICApO1xuXG4gICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICBpZiAoXCJhZ2VudFwiIGluIGNodW5rKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coY2h1bmsuYWdlbnQubWVzc2FnZXNbMF0uY29udGVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJ0b29sc1wiIGluIGNodW5rKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coY2h1bmsudG9vbHMubWVzc2FnZXNbMF0uY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBpbnRlcnZhbCAqIDEwMDApKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSdW4gdGhlIGFnZW50IGludGVyYWN0aXZlbHkgYmFzZWQgb24gdXNlciBpbnB1dFxuICpcbiAqIEBwYXJhbSBhZ2VudCAtIFRoZSBhZ2VudCBleGVjdXRvclxuICogQHBhcmFtIGNvbmZpZyAtIEFnZW50IGNvbmZpZ3VyYXRpb25cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmFzeW5jIGZ1bmN0aW9uIHJ1bkNoYXRNb2RlKGFnZW50OiBhbnksIGNvbmZpZzogYW55KSB7XG4gIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgY2hhdCBtb2RlLi4uIFR5cGUgJ2V4aXQnIHRvIGVuZC5cIik7XG5cbiAgY29uc3QgcmwgPSByZWFkbGluZS5jcmVhdGVJbnRlcmZhY2Uoe1xuICAgIGlucHV0OiBwcm9jZXNzLnN0ZGluLFxuICAgIG91dHB1dDogcHJvY2Vzcy5zdGRvdXQsXG4gIH0pO1xuXG4gIGNvbnN0IHF1ZXN0aW9uID0gKHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+ID0+XG4gICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJsLnF1ZXN0aW9uKHByb21wdCwgcmVzb2x2ZSkpO1xuXG4gIHRyeSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCB1c2VySW5wdXQgPSBhd2FpdCBxdWVzdGlvbihcIlxcblByb21wdDogXCIpO1xuXG4gICAgICBpZiAodXNlcklucHV0LnRvTG93ZXJDYXNlKCkgPT09IFwiZXhpdFwiKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBhZ2VudC5zdHJlYW0oXG4gICAgICAgIHsgbWVzc2FnZXM6IFtuZXcgSHVtYW5NZXNzYWdlKHVzZXJJbnB1dCldIH0sXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICk7XG5cbiAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgIGlmIChcImFnZW50XCIgaW4gY2h1bmspIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhjaHVuay5hZ2VudC5tZXNzYWdlc1swXS5jb250ZW50KTtcbiAgICAgICAgfSBlbHNlIGlmIChcInRvb2xzXCIgaW4gY2h1bmspIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhjaHVuay50b29scy5tZXNzYWdlc1swXS5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH0gZmluYWxseSB7XG4gICAgcmwuY2xvc2UoKTtcbiAgfVxufVxuXG4vKipcbiAqIENob29zZSB3aGV0aGVyIHRvIHJ1biBpbiBhdXRvbm9tb3VzIG9yIGNoYXQgbW9kZSBiYXNlZCBvbiB1c2VyIGlucHV0XG4gKlxuICogQHJldHVybnMgU2VsZWN0ZWQgbW9kZVxuICovXG5hc3luYyBmdW5jdGlvbiBjaG9vc2VNb2RlKCk6IFByb21pc2U8XCJjaGF0XCIgfCBcImF1dG9cIj4ge1xuICBjb25zdCBybCA9IHJlYWRsaW5lLmNyZWF0ZUludGVyZmFjZSh7XG4gICAgaW5wdXQ6IHByb2Nlc3Muc3RkaW4sXG4gICAgb3V0cHV0OiBwcm9jZXNzLnN0ZG91dCxcbiAgfSk7XG5cbiAgY29uc3QgcXVlc3Rpb24gPSAocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4gPT5cbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmwucXVlc3Rpb24ocHJvbXB0LCByZXNvbHZlKSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIGNvbnNvbGUubG9nKFwiXFxuQXZhaWxhYmxlIG1vZGVzOlwiKTtcbiAgICBjb25zb2xlLmxvZyhcIjEuIGNoYXQgICAgLSBJbnRlcmFjdGl2ZSBjaGF0IG1vZGVcIik7XG4gICAgY29uc29sZS5sb2coXCIyLiBhdXRvICAgIC0gQXV0b25vbW91cyBhY3Rpb24gbW9kZVwiKTtcblxuICAgIGNvbnN0IGNob2ljZSA9IChhd2FpdCBxdWVzdGlvbihcIlxcbkNob29zZSBhIG1vZGUgKGVudGVyIG51bWJlciBvciBuYW1lKTogXCIpKVxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC50cmltKCk7XG5cbiAgICBpZiAoY2hvaWNlID09PSBcIjFcIiB8fCBjaG9pY2UgPT09IFwiY2hhdFwiKSB7XG4gICAgICBybC5jbG9zZSgpO1xuICAgICAgcmV0dXJuIFwiY2hhdFwiO1xuICAgIH0gZWxzZSBpZiAoY2hvaWNlID09PSBcIjJcIiB8fCBjaG9pY2UgPT09IFwiYXV0b1wiKSB7XG4gICAgICBybC5jbG9zZSgpO1xuICAgICAgcmV0dXJuIFwiYXV0b1wiO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgY2hvaWNlLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTtcbiAgfVxufVxuXG4vKipcbiAqIFN0YXJ0IHRoZSBjaGF0Ym90IGFnZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBhZ2VudCwgY29uZmlnIH0gPSBhd2FpdCBpbml0aWFsaXplQWdlbnQoKTtcbiAgICBjb25zdCBtb2RlID0gYXdhaXQgY2hvb3NlTW9kZSgpO1xuXG4gICAgaWYgKG1vZGUgPT09IFwiY2hhdFwiKSB7XG4gICAgICBhd2FpdCBydW5DaGF0TW9kZShhZ2VudCwgY29uZmlnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgcnVuQXV0b25vbW91c01vZGUoYWdlbnQsIGNvbmZpZyk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cblxuaWYgKHJlcXVpcmUubWFpbiA9PT0gbW9kdWxlKSB7XG4gIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgQWdlbnQuLi5cIik7XG4gIG1haW4oKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmF0YWwgZXJyb3I6XCIsIGVycm9yKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbIkFnZW50S2l0IiwiQ2RwV2FsbGV0UHJvdmlkZXIiLCJ3ZXRoQWN0aW9uUHJvdmlkZXIiLCJ3YWxsZXRBY3Rpb25Qcm92aWRlciIsImVyYzIwQWN0aW9uUHJvdmlkZXIiLCJlcmM3MjFBY3Rpb25Qcm92aWRlciIsImNkcEFwaUFjdGlvblByb3ZpZGVyIiwiY2RwV2FsbGV0QWN0aW9uUHJvdmlkZXIiLCJweXRoQWN0aW9uUHJvdmlkZXIiLCJnZW5lcmF0ZTNEQXNzZXQiLCJyZWZpbmUzREFzc2V0IiwibWludE5GVCIsImdldExhbmdDaGFpblRvb2xzIiwiSHVtYW5NZXNzYWdlIiwiTWVtb3J5U2F2ZXIiLCJjcmVhdGVSZWFjdEFnZW50IiwiQ2hhdE9wZW5BSSIsImRvdGVudiIsImZzIiwicmVhZGxpbmUiLCJjb25maWciLCJ2YWxpZGF0ZUVudmlyb25tZW50IiwibWlzc2luZ1ZhcnMiLCJyZXF1aXJlZFZhcnMiLCJmb3JFYWNoIiwidmFyTmFtZSIsInByb2Nlc3MiLCJlbnYiLCJwdXNoIiwibGVuZ3RoIiwiY29uc29sZSIsImVycm9yIiwidG9Mb3dlckNhc2UiLCJleGl0IiwiTkVUV09SS19JRCIsIndhcm4iLCJXQUxMRVRfREFUQV9GSUxFIiwiaW5pdGlhbGl6ZUFnZW50IiwibGxtIiwibW9kZWwiLCJhcGlLZXkiLCJPUEVOQUlfQVBJX0tFWSIsImNvbmZpZ3VyYXRpb24iLCJiYXNlVVJMIiwid2FsbGV0RGF0YVN0ciIsImV4aXN0c1N5bmMiLCJyZWFkRmlsZVN5bmMiLCJhcGlLZXlOYW1lIiwiQ0RQX0FQSV9LRVlfTkFNRSIsImFwaUtleVByaXZhdGVLZXkiLCJDRFBfQVBJX0tFWV9QUklWQVRFX0tFWSIsInJlcGxhY2UiLCJjZHBXYWxsZXREYXRhIiwidW5kZWZpbmVkIiwibmV0d29ya0lkIiwid2FsbGV0UHJvdmlkZXIiLCJjb25maWd1cmVXaXRoV2FsbGV0IiwiYWdlbnRraXQiLCJmcm9tIiwiYWN0aW9uUHJvdmlkZXJzIiwidG9vbHMiLCJtZW1vcnkiLCJhZ2VudENvbmZpZyIsImNvbmZpZ3VyYWJsZSIsInRocmVhZF9pZCIsImFnZW50IiwiY2hlY2twb2ludFNhdmVyIiwibWVzc2FnZU1vZGlmaWVyIiwiZXhwb3J0ZWRXYWxsZXQiLCJleHBvcnRXYWxsZXQiLCJ3cml0ZUZpbGVTeW5jIiwiSlNPTiIsInN0cmluZ2lmeSIsInJ1bkF1dG9ub21vdXNNb2RlIiwiaW50ZXJ2YWwiLCJsb2ciLCJ0aG91Z2h0Iiwic3RyZWFtIiwibWVzc2FnZXMiLCJjaHVuayIsImNvbnRlbnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJFcnJvciIsIm1lc3NhZ2UiLCJydW5DaGF0TW9kZSIsInJsIiwiY3JlYXRlSW50ZXJmYWNlIiwiaW5wdXQiLCJzdGRpbiIsIm91dHB1dCIsInN0ZG91dCIsInF1ZXN0aW9uIiwicHJvbXB0IiwidXNlcklucHV0IiwiY2xvc2UiLCJjaG9vc2VNb2RlIiwiY2hvaWNlIiwidHJpbSIsIm1haW4iLCJtb2RlIiwicmVxdWlyZSIsIm1vZHVsZSIsImNhdGNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./chatbot.ts\n");

/***/ }),

/***/ "(api)/./pages/api/chat.ts":
/*!***************************!*\
  !*** ./pages/api/chat.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./server */ \"(api)/./pages/api/server.ts\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/messages */ \"@langchain/core/messages\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server__WEBPACK_IMPORTED_MODULE_0__, _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__]);\n([_server__WEBPACK_IMPORTED_MODULE_0__, _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst config = {\n    api: {\n        bodyParser: true,\n        responseLimit: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { message } = req.body;\n        if (!message) {\n            return res.status(400).json({\n                error: 'Message is required'\n            });\n        }\n        const { agent, config } = await (0,_server__WEBPACK_IMPORTED_MODULE_0__.getAgent)();\n        const stream = await agent.stream({\n            messages: [\n                new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(message)\n            ]\n        }, config);\n        res.setHeader('Content-Type', 'text/event-stream');\n        res.setHeader('Cache-Control', 'no-cache');\n        res.setHeader('Connection', 'keep-alive');\n        for await (const chunk of stream){\n            if (\"agent\" in chunk) {\n                res.write(`data: ${JSON.stringify({\n                    type: \"agent\",\n                    content: chunk.agent.messages[0].content\n                })}\\n\\n`);\n            } else if (\"tools\" in chunk) {\n                res.write(`data: ${JSON.stringify({\n                    type: \"tools\",\n                    content: chunk.tools.messages[0].content\n                })}\\n\\n`);\n            }\n        }\n        res.write('data: [DONE]\\n\\n');\n        res.end();\n    } catch (error) {\n        if (!res.headersSent) {\n            res.status(500).json({\n                error: error instanceof Error ? error.message : 'Unknown error'\n            });\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY2hhdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ29DO0FBQ29CO0FBRWpELE1BQU1FLFNBQVM7SUFDcEJDLEtBQUs7UUFDSEMsWUFBWTtRQUNaQyxlQUFlO0lBQ2pCO0FBQ0YsRUFBRTtBQUVhLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVDLE9BQU8sRUFBRSxHQUFHTixJQUFJTyxJQUFJO1FBRTVCLElBQUksQ0FBQ0QsU0FBUztZQUNaLE9BQU9MLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBc0I7UUFDN0Q7UUFFQSxNQUFNLEVBQUVHLEtBQUssRUFBRWIsTUFBTSxFQUFFLEdBQUcsTUFBTUYsaURBQVFBO1FBQ3hDLE1BQU1nQixTQUFTLE1BQU1ELE1BQU1DLE1BQU0sQ0FDL0I7WUFBRUMsVUFBVTtnQkFBQyxJQUFJaEIsa0VBQVlBLENBQUNZO2FBQVM7UUFBQyxHQUN4Q1g7UUFHRk0sSUFBSVUsU0FBUyxDQUFDLGdCQUFnQjtRQUM5QlYsSUFBSVUsU0FBUyxDQUFDLGlCQUFpQjtRQUMvQlYsSUFBSVUsU0FBUyxDQUFDLGNBQWM7UUFFNUIsV0FBVyxNQUFNQyxTQUFTSCxPQUFRO1lBQ2hDLElBQUksV0FBV0csT0FBTztnQkFDcEJYLElBQUlZLEtBQUssQ0FBQyxDQUFDLE1BQU0sRUFBRUMsS0FBS0MsU0FBUyxDQUFDO29CQUNoQ0MsTUFBTTtvQkFDTkMsU0FBU0wsTUFBTUosS0FBSyxDQUFDRSxRQUFRLENBQUMsRUFBRSxDQUFDTyxPQUFPO2dCQUMxQyxHQUFHLElBQUksQ0FBQztZQUNWLE9BQU8sSUFBSSxXQUFXTCxPQUFPO2dCQUMzQlgsSUFBSVksS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFQyxLQUFLQyxTQUFTLENBQUM7b0JBQ2hDQyxNQUFNO29CQUNOQyxTQUFTTCxNQUFNTSxLQUFLLENBQUNSLFFBQVEsQ0FBQyxFQUFFLENBQUNPLE9BQU87Z0JBQzFDLEdBQUcsSUFBSSxDQUFDO1lBQ1Y7UUFDRjtRQUVBaEIsSUFBSVksS0FBSyxDQUFDO1FBQ1ZaLElBQUlrQixHQUFHO0lBQ1QsRUFBRSxPQUFPZCxPQUFPO1FBQ2QsSUFBSSxDQUFDSixJQUFJbUIsV0FBVyxFQUFFO1lBQ3BCbkIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDbkJDLE9BQU9BLGlCQUFpQmdCLFFBQVFoQixNQUFNQyxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvcGFnZXMvYXBpL2NoYXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgZ2V0QWdlbnQgfSBmcm9tICcuL3NlcnZlcic7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UgfSBmcm9tICdAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXMnO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBhcGk6IHtcbiAgICBib2R5UGFyc2VyOiB0cnVlLFxuICAgIHJlc3BvbnNlTGltaXQ6IGZhbHNlLFxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01lc3NhZ2UgaXMgcmVxdWlyZWQnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgYWdlbnQsIGNvbmZpZyB9ID0gYXdhaXQgZ2V0QWdlbnQoKTtcbiAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBhZ2VudC5zdHJlYW0oXG4gICAgICB7IG1lc3NhZ2VzOiBbbmV3IEh1bWFuTWVzc2FnZShtZXNzYWdlKV0gfSxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG5cbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAndGV4dC9ldmVudC1zdHJlYW0nKTtcbiAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ25vLWNhY2hlJyk7XG4gICAgcmVzLnNldEhlYWRlcignQ29ubmVjdGlvbicsICdrZWVwLWFsaXZlJyk7XG5cbiAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgaWYgKFwiYWdlbnRcIiBpbiBjaHVuaykge1xuICAgICAgICByZXMud3JpdGUoYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHR5cGU6IFwiYWdlbnRcIixcbiAgICAgICAgICBjb250ZW50OiBjaHVuay5hZ2VudC5tZXNzYWdlc1swXS5jb250ZW50XG4gICAgICAgIH0pfVxcblxcbmApO1xuICAgICAgfSBlbHNlIGlmIChcInRvb2xzXCIgaW4gY2h1bmspIHtcbiAgICAgICAgcmVzLndyaXRlKGBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0eXBlOiBcInRvb2xzXCIsXG4gICAgICAgICAgY29udGVudDogY2h1bmsudG9vbHMubWVzc2FnZXNbMF0uY29udGVudFxuICAgICAgICB9KX1cXG5cXG5gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXMud3JpdGUoJ2RhdGE6IFtET05FXVxcblxcbicpO1xuICAgIHJlcy5lbmQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoIXJlcy5oZWFkZXJzU2VudCkge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSJdLCJuYW1lcyI6WyJnZXRBZ2VudCIsIkh1bWFuTWVzc2FnZSIsImNvbmZpZyIsImFwaSIsImJvZHlQYXJzZXIiLCJyZXNwb25zZUxpbWl0IiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1lc3NhZ2UiLCJib2R5IiwiYWdlbnQiLCJzdHJlYW0iLCJtZXNzYWdlcyIsInNldEhlYWRlciIsImNodW5rIiwid3JpdGUiLCJKU09OIiwic3RyaW5naWZ5IiwidHlwZSIsImNvbnRlbnQiLCJ0b29scyIsImVuZCIsImhlYWRlcnNTZW50IiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/chat.ts\n");

/***/ }),

/***/ "(api)/./pages/api/server.ts":
/*!*****************************!*\
  !*** ./pages/api/server.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAgent: () => (/* binding */ getAgent)\n/* harmony export */ });\n/* harmony import */ var _chatbot__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chatbot */ \"(api)/./chatbot.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_chatbot__WEBPACK_IMPORTED_MODULE_0__]);\n_chatbot__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Initialize agent once and export for use across API endpoints\nconst getAgent = async ()=>{\n    try {\n        const { agent, config } = await (0,_chatbot__WEBPACK_IMPORTED_MODULE_0__.initializeAgent)();\n        return {\n            agent,\n            config\n        };\n    } catch (error) {\n        console.error('Failed to initialize agent:', error);\n        throw error;\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWdEO0FBRWhELGdFQUFnRTtBQUN6RCxNQUFNQyxXQUFXO0lBQ3RCLElBQUk7UUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFFLEdBQUcsTUFBTUgseURBQWVBO1FBQy9DLE9BQU87WUFBRUU7WUFBT0M7UUFBTztJQUN6QixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsTUFBTUE7SUFDUjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvcGFnZXMvYXBpL3NlcnZlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbml0aWFsaXplQWdlbnQgfSBmcm9tICcuLi8uLi9jaGF0Ym90JztcblxuLy8gSW5pdGlhbGl6ZSBhZ2VudCBvbmNlIGFuZCBleHBvcnQgZm9yIHVzZSBhY3Jvc3MgQVBJIGVuZHBvaW50c1xuZXhwb3J0IGNvbnN0IGdldEFnZW50ID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgYWdlbnQsIGNvbmZpZyB9ID0gYXdhaXQgaW5pdGlhbGl6ZUFnZW50KCk7XG4gICAgcmV0dXJuIHsgYWdlbnQsIGNvbmZpZyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGFnZW50OicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJpbml0aWFsaXplQWdlbnQiLCJnZXRBZ2VudCIsImFnZW50IiwiY29uZmlnIiwiZXJyb3IiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();